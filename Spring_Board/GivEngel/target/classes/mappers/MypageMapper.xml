<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MypageDAO"> 
  
<update id="myPwdConfirm" parameterType="userVO">
UPDATE user SET user_pw = #{user_pw} WHERE user_no=#{user_no}
</update>

<update id="myNickConfirm" parameterType="userVO">
UPDATE user SET user_name=#{user_name} WHERE user_no=#{user_no}
</update>

<update id="myTelConfirm" parameterType="userVO">
UPDATE user SET user_tel=#{user_tel} WHERE user_no=#{user_no}
</update>

<update id="myAddrConfirm" parameterType="userVO">
UPDATE user SET user_addr=#{user_addr} WHERE user_no=#{user_no}
</update>

<select id="genderDetect" parameterType="userVO" resultType="hashmap">
SELECT substr(user_jumin,8,1) FROM user WHERE user_no=#{user_no}
</select>

<select id="userGradeBuy" parameterType="userVO" resultType="user_buylogVO">
SELECT sum(user_buylog_price) FROM user WHERE user_no=#{user_no}
</select>

<select id="userGradeCash" parameterType="userVO" resultType="user_cashlogVO">
SELECT sum(user_cashlog_price) FROM user WHERE user_no=#{user_no}
</select>

<select id="myCashList" parameterType="userVO" resultType="user_cashlogVO">
SELECT * FROM user_cashlog WHERE user_no=#{user_no} ORDER BY user_cashlog_date DESC
</select>
 
<select id="myBuyList" parameterType="userVO" resultType="hashmap">
SELECT a.good_no, a.user_buy_price, a.user_buylog_date, b.good_img, b.good_price, b.spon_no 
FROM user_buylog a INNER JOIN good b ON a.good_no = b.good_no where user_no=#{user.no}
</select>
</mapper> 